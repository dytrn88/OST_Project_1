<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="../css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="../css/styles.css">

    <script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"></script>

</head>

<body>
    <header>
        <h1>OST Project 1</h1>
    </header>


    </div>

    <main>
        <section>
            <h2>To-do app</h2>

            <div class="menu">
                <div class="menu-buttons">
                    <button class="menu-button" id="openDialog">+ Create</button>
                    <button class="menu-button" id="darkMode">Toggle</button>
                </div>

                <div class="dialog-overlay"></div>
                <div class="dialog-box">
                    <div class="top-bar">
                        <span class="close">&times;</span>
                    </div>

                    <form class="add-task-form-container" id="addTaskForm">
                        <input class="input-field" id="newTaskTitle" type="text" placeholder="Add title">
                        <input class="input-field" id="newTaskDate" type="date">
                        <textarea class="input-field" id="newTaskContent" cols=" 30" rows="5"
                            placeholder="Description..."></textarea>
                        <select class="input-field" id="newTaskPriority">
                            <option value="" disabled selected>Select priority</option>
                            <option value="3 - Urgent">3 - Urgent</option>
                            <option value="2 - High">2- High</option>
                            <option value="1 - Mid">1 - Mid</option>
                            <option value="0 - Low">0 - Low</option>
                        </select>
                        <button class="new-task-btn" type="button" id="newTaskBtn">Submit</button>
                    </form>
                </div>
            </div>

            <div class="task-container" id="taskContainer">
                <div class="task-item" id="taskItem">

                    <h3>Task list</h3>
                    <div class="sort-btn-container">
                        <button class="sort-task-btn" type="button" id="sortTaskTitlesBtn">Sort by tasks</button>
                        <button class="sort-task-btn" type="button" id="sortTaskDatesBtn">Sort by date</button>
                        <button class="sort-task-btn" type="button" id="sortTaskPriorityBtn">Sort by priority</button>
                        <br>
                        <button class="filter-task-btn">Filter completed</button>
                    </div>

                    <div class="task-list" id="taskList"> </div>
                </div>

                <script id="tasks-template" type="text/x-handlebars-template">
                    <table class="table table-striped">
                        <tbody>
                        {{#each task}}
                        <div data-id="{{_id}}" class="task-list-container">
                            <input class="task-checkbox" type="checkbox">             
                            <p class="task-title">{{title}}</p>
                            <p class="task-priority">{{priority}}</p>                
                            <p class="task-date">{{dueDate}}</p>
                            <button data-id="{{_id}}" class="edit-task-btn">Edit</button>                                            
                            <button data-id="{{_id}}" class="delete-task-btn">Delete</button>                                            
                        </div>
                        {{/each}}
                        </tbody>
                    </table>
                </script>

                <div class="task-detail-container">
                    <div class="task-detail" id="taskDetail">
                        <button class="close-task">&larr;</button>
                        <h3>Task details</h3>
                        <form class="edit-task-form-container" id="editTaskForm">
                            <p class="selected-id" id=" selectedId"></p>

                            <input class="edit-field" type="text" id="selectedId" required>
                            <input class="edit-field" type="text" id="selectedTitle" required>
                            <input class="edit-field" type="date" id="selectedDate" required>
                            <input class="edit-field" type="text" id="selectedContent" required>
                            <select class="edit-field" id="selectedPriority">
                                <option value="" disabled selected>Select priority</option>
                                <option value="3 - Urgent">3 - Urgent</option>
                                <option value="2 - High">2 - High</option>
                                <option value="1 - Mid">1 - Mid</option>
                                <option value="1 - Low">0 - Low</option>
                            </select>
                            <button data-id="{{_id}}" class="update-task-btn" type="button"
                                id="updateTaskBtn">Update</button>
                        </form>
                    </div>

                    <script id="edit-tasks-template" type="text/x-handlebars-template">
                    <div class="edit-task-list-container">
                        <p class="edit-id">{{_id}}</p>
                        <p class="edit-title">{{title}}</p>                           
                        <p class="edit-content">{{content}}</p>                                                               
                        <p class="edit-title">{{priority}}</p>                                                               
                        <p class="edit-duedate">{{duedate}}</p>                                                               
                    </div>                                
                    </script>

                </div>

            </div>

        </section>

    </main>

    <script src="../js/controller/index-controller.js" type="module"></script>

</body>

</html>